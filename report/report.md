./profiler.sh -d 80 -e lock -f hw2lock_get.html 712  
./profiler.sh -d 80 -e lock -f hw2alloc_get.html 712  
./profiler.sh -d 80 -e lock -f hw2cpu_get.html 712

wrk -c 64 -t 3 -d 1m -R 10000 -L -s get.lua http://localhost:8080


root@DESKTOP-E01FUOQ:~/wrk2# wrk -c 120 -t 3 -d 2m -R 20000 -L -s put.lua http://localhost:8080  
Running 2m test @ http://localhost:8080  
3 threads and 120 connections  
Thread calibration: mean lat.: 2.179ms, rate sampling interval: 10ms  
Thread calibration: mean lat.: 2.135ms, rate sampling interval: 10ms  
Thread calibration: mean lat.: 2.990ms, rate sampling interval: 11ms  
Thread Stats   Avg      Stdev     Max   +/- Stdev  
Latency     3.61ms    6.28ms 105.02ms   92.58%  
Req/Sec     7.11k     2.51k   43.90k    80.97%  
Latency Distribution (HdrHistogram - Recorded Latency)  
50.000%    1.75ms  
75.000%    3.14ms  
90.000%    7.85ms  
99.000%   32.74ms  
99.900%   69.18ms  
99.990%   90.82ms  
99.999%  102.85ms  
100.000%  105.09ms  

Detailed Percentile spectrum:  
Value   Percentile   TotalCount 1/(1-Percentile)  

       0.041     0.000000            1         1.00
       0.686     0.100000       219857         1.11
       0.978     0.200000       439799         1.25
       1.236     0.300000       659099         1.43
       1.488     0.400000       878984         1.67
       1.746     0.500000      1098676         2.00
       1.899     0.550000      1208037         2.22
       2.083     0.600000      1318055         2.50
       2.307     0.650000      1427452         2.86
       2.623     0.700000      1537308         3.33
       3.137     0.750000      1646965         4.00
       3.521     0.775000      1701968         4.44
       4.009     0.800000      1756768         5.00
       4.627     0.825000      1811857         5.71
       5.427     0.850000      1866669         6.67
       6.471     0.875000      1921530         8.00
       7.123     0.887500      1949055         8.89
       7.851     0.900000      1976417        10.00
       8.727     0.912500      2003815        11.43
       9.815     0.925000      2031405        13.33
      11.239     0.937500      2058762        16.00
      12.127     0.943750      2072432        17.78
      13.159     0.950000      2086241        20.00
      14.407     0.956250      2099918        22.86
      15.855     0.962500      2113636        26.67
      17.743     0.968750      2127376        32.00
      18.863     0.971875      2134215        35.56
      20.223     0.975000      2141107        40.00
      21.807     0.978125      2147935        45.71
      23.759     0.981250      2154803        53.33
      26.175     0.984375      2161663        64.00
      27.663     0.985938      2165090        71.11
      29.343     0.987500      2168514        80.00
      31.375     0.989062      2171938        91.43
      33.695     0.990625      2175381       106.67
      36.543     0.992188      2178800       128.00
      38.271     0.992969      2180511       142.22
      40.127     0.993750      2182232       160.00
      42.367     0.994531      2183947       182.86
      44.863     0.995313      2185670       213.33
      47.807     0.996094      2187373       256.00
      49.631     0.996484      2188220       284.44
      51.519     0.996875      2189086       320.00
      53.631     0.997266      2189949       365.71
      56.255     0.997656      2190794       426.67
      59.487     0.998047      2191653       512.00
      61.151     0.998242      2192083       568.89
      63.071     0.998437      2192511       640.00
      65.151     0.998633      2192944       731.43
      67.263     0.998828      2193376       853.33
      69.439     0.999023      2193804      1024.00
      70.911     0.999121      2194026      1137.78
      71.999     0.999219      2194229      1280.00
      73.343     0.999316      2194451      1462.86
      74.815     0.999414      2194660      1706.67
      76.671     0.999512      2194870      2048.00
      77.951     0.999561      2194975      2275.56
      79.231     0.999609      2195085      2560.00
      80.703     0.999658      2195190      2925.71
      82.303     0.999707      2195299      3413.33
      84.159     0.999756      2195409      4096.00
      85.119     0.999780      2195459      4551.11
      86.079     0.999805      2195512      5120.00
      87.231     0.999829      2195565      5851.43
      88.255     0.999854      2195620      6826.67
      89.919     0.999878      2195674      8192.00
      90.495     0.999890      2195704      9102.22
      91.071     0.999902      2195727     10240.00
      91.775     0.999915      2195754     11702.86
      92.607     0.999927      2195780     13653.33
      93.503     0.999939      2195807     16384.00
      94.271     0.999945      2195820     18204.44
      94.847     0.999951      2195833     20480.00
      95.807     0.999957      2195848     23405.71
      96.895     0.999963      2195860     27306.67
      97.983     0.999969      2195874     32768.00
      98.367     0.999973      2195881     36408.89
      98.751     0.999976      2195887     40960.00
      99.263     0.999979      2195894     46811.43
     100.735     0.999982      2195900     54613.33
     101.375     0.999985      2195907     65536.00
     101.951     0.999986      2195910     72817.78
     102.655     0.999988      2195915     81920.00
     102.783     0.999989      2195917     93622.86
     102.975     0.999991      2195920    109226.67
     103.423     0.999992      2195924    131072.00
     103.679     0.999993      2195925    145635.56
     103.999     0.999994      2195928    163840.00
     104.063     0.999995      2195930    187245.71
     104.063     0.999995      2195930    218453.33
     104.191     0.999996      2195932    262144.00
     104.255     0.999997      2195933    291271.11
     104.319     0.999997      2195934    327680.00
     104.639     0.999997      2195935    374491.43
     104.639     0.999998      2195935    436906.67
     104.767     0.999998      2195936    524288.00
     104.831     0.999998      2195937    582542.22
     104.831     0.999998      2195937    655360.00
     104.895     0.999999      2195938    748982.86
     104.895     0.999999      2195938    873813.33
     104.895     0.999999      2195938   1048576.00
     104.959     0.999999      2195939   1165084.44
     104.959     0.999999      2195939   1310720.00
     104.959     0.999999      2195939   1497965.71
     104.959     0.999999      2195939   1747626.67
     104.959     1.000000      2195939   2097152.00
     105.087     1.000000      2195940   2330168.89
     105.087     1.000000      2195940          inf
[Mean    =        3.607, StdDeviation   =        6.277]  
[Max     =      105.024, Total count    =      2195940]  
[Buckets =           27, SubBuckets     =         2048]  
----------------------------------------------------------
2391994 requests in 2.00m, 152.84MB read  
Requests/sec:  19932.74  
Transfer/sec:      1.27MB      

----


root@DESKTOP-E01FUOQ:~/async-profiler# ./profiler.sh -d 80 -f hw2cpu_get.html 4307  
root@DESKTOP-E01FUOQ:~/async-profiler# ./profiler.sh -d 80 -e alloc -f hw2alloc_get.html 4307  
root@DESKTOP-E01FUOQ:~/async-profiler# ./profiler.sh -d 80 -e lock -f hw2lock_get.html 4307  

#GET

По наполненной базе

root@DESKTOP-E01FUOQ:~/wrk2# wrk -c 120 -t 3 -d 2m -R 20000 -L -s get.lua http://localhost:8080  
Running 2m test @ http://localhost:8080  
3 threads and 120 connections  
Thread calibration: mean lat.: 99.163ms, rate sampling interval: 688ms  
Thread calibration: mean lat.: 98.822ms, rate sampling interval: 688ms  
Thread calibration: mean lat.: 106.299ms, rate sampling interval: 711ms  
Thread Stats   Avg      Stdev     Max   +/- Stdev  
Latency     5.10ms    7.53ms  51.04ms   86.15%  
Req/Sec     6.67k    92.75     7.02k    79.24%  
Latency Distribution (HdrHistogram - Recorded Latency)  
50.000%    1.78ms  
75.000%    4.50ms  
90.000%   16.67ms  
99.000%   33.63ms  
99.900%   42.59ms  
99.990%   47.07ms  
99.999%   50.21ms  
100.000%   51.07ms  

Detailed Percentile spectrum:  
Value   Percentile   TotalCount 1/(1-Percentile)  

       0.100     0.000000            1         1.00
       0.799     0.100000       219727         1.11
       1.065     0.200000       440111         1.25
       1.298     0.300000       659397         1.43
       1.531     0.400000       879343         1.67
       1.780     0.500000      1098782         2.00
       1.929     0.550000      1208531         2.22
       2.095     0.600000      1318921         2.50
       2.329     0.650000      1427838         2.86
       2.831     0.700000      1537611         3.33
       4.499     0.750000      1647311         4.00
       5.731     0.775000      1702262         4.44
       7.503     0.800000      1757083         5.00
       9.423     0.825000      1812054         5.71
      11.495     0.850000      1867028         6.67
      14.039     0.875000      1921820         8.00
      15.335     0.887500      1949392         8.89
      16.671     0.900000      1976935        10.00
      17.999     0.912500      2004270        11.43
      19.407     0.925000      2031667        13.33
      21.199     0.937500      2059127        16.00
      22.207     0.943750      2072947        17.78
      23.199     0.950000      2086742        20.00
      24.271     0.956250      2100358        22.86
      25.375     0.962500      2114032        26.67
      26.655     0.968750      2127839        32.00
      27.439     0.971875      2134653        35.56
      28.303     0.975000      2141492        40.00
      29.247     0.978125      2148395        45.71
      30.255     0.981250      2155214        53.33
      31.279     0.984375      2162090        64.00
      31.823     0.985938      2165461        71.11
      32.463     0.987500      2168886        80.00
      33.183     0.989062      2172417        91.43
      33.983     0.990625      2175781       106.67
      34.975     0.992188      2179290       128.00
      35.487     0.992969      2180910       142.22
      36.063     0.993750      2182674       160.00
      36.639     0.994531      2184407       182.86
      37.183     0.995313      2186048       213.33
      37.727     0.996094      2187823       256.00
      38.015     0.996484      2188707       284.44
      38.303     0.996875      2189512       320.00
      38.655     0.997266      2190366       365.71
      39.135     0.997656      2191222       426.67
      39.871     0.998047      2192058       512.00
      40.415     0.998242      2192493       568.89
      40.927     0.998437      2192916       640.00
      41.503     0.998633      2193349       731.43
      42.079     0.998828      2193780       853.33
      42.655     0.999023      2194195      1024.00
      43.007     0.999121      2194423      1137.78
      43.359     0.999219      2194636      1280.00
      43.711     0.999316      2194839      1462.86
      44.095     0.999414      2195070      1706.67
      44.415     0.999512      2195274      2048.00
      44.639     0.999561      2195390      2275.56
      44.831     0.999609      2195481      2560.00
      45.055     0.999658      2195588      2925.71
      45.311     0.999707      2195701      3413.33
      45.631     0.999756      2195803      4096.00
      45.887     0.999780      2195861      4551.11
      46.079     0.999805      2195914      5120.00
      46.303     0.999829      2195967      5851.43
      46.463     0.999854      2196017      6826.67
      46.719     0.999878      2196070      8192.00
      46.911     0.999890      2196098      9102.22
      47.071     0.999902      2196126     10240.00
      47.263     0.999915      2196153     11702.86
      47.455     0.999927      2196177     13653.33
      47.711     0.999939      2196203     16384.00
      47.871     0.999945      2196221     18204.44
      47.967     0.999951      2196232     20480.00
      48.063     0.999957      2196244     23405.71
      48.159     0.999963      2196258     27306.67
      48.351     0.999969      2196272     32768.00
      48.447     0.999973      2196279     36408.89
      48.639     0.999976      2196284     40960.00
      49.055     0.999979      2196291     46811.43
      49.631     0.999982      2196297     54613.33
      49.887     0.999985      2196304     65536.00
      49.951     0.999986      2196308     72817.78
      50.143     0.999988      2196311     81920.00
      50.175     0.999989      2196314     93622.86
      50.239     0.999991      2196318    109226.67
      50.335     0.999992      2196321    131072.00
      50.463     0.999993      2196324    145635.56
      50.463     0.999994      2196324    163840.00
      50.527     0.999995      2196327    187245.71
      50.527     0.999995      2196327    218453.33
      50.687     0.999996      2196329    262144.00
      50.719     0.999997      2196330    291271.11
      50.751     0.999997      2196331    327680.00
      50.783     0.999997      2196332    374491.43
      50.783     0.999998      2196332    436906.67
      50.815     0.999998      2196333    524288.00
      50.847     0.999998      2196334    582542.22
      50.847     0.999998      2196334    655360.00
      50.943     0.999999      2196335    748982.86
      50.943     0.999999      2196335    873813.33
      50.943     0.999999      2196335   1048576.00
      51.007     0.999999      2196336   1165084.44
      51.007     0.999999      2196336   1310720.00
      51.007     0.999999      2196336   1497965.71
      51.007     0.999999      2196336   1747626.67
      51.007     1.000000      2196336   2097152.00
      51.071     1.000000      2196337   2330168.89
      51.071     1.000000      2196337          inf
[Mean    =        5.104, StdDeviation   =        7.526]  
[Max     =       51.040, Total count    =      2196337]  
[Buckets =           27, SubBuckets     =         2048]  
----------------------------------------------------------
2398078 requests in 2.00m, 168.89MB read  
Requests/sec:  19983.84  
Transfer/sec:      1.41MB  

#ВЫВОДЫ:

[cpu_put]()
[alloc_put]()
[lock_put]()

##Put:



[cpu_get]()
[alloc_get]()
[lock_get]()
##Get:

