./profiler.sh -d 90 -e lock -f hw4lock_put.html 712  
./profiler.sh -d 90 -e alloc -f hw4alloc_put.html 712  
./profiler.sh -d 90 -f hw4cpu_put.html 712


root@DESKTOP-E01FUOQ:~/wrk2# wrk -c 120 -t 3 -d 2m -R 13000 -L -s put.lua http://localhost:8080  
Running 2m test @ http://localhost:8080  
3 threads and 120 connections  
Thread calibration: mean lat.: 175.687ms, rate sampling interval: 753ms  
Thread calibration: mean lat.: 80.545ms, rate sampling interval: 411ms  
Thread calibration: mean lat.: 99.072ms, rate sampling interval: 513ms  
Thread Stats   Avg      Stdev     Max   +/- Stdev  
Latency    40.83ms   78.86ms 773.63ms   89.82%  
Req/Sec     4.35k   551.86     8.23k    80.58%  
Latency Distribution (HdrHistogram - Recorded Latency)  
50.000%    8.69ms  
75.000%   38.59ms  
90.000%  121.60ms  
99.000%  382.72ms  
99.900%  630.27ms  
99.990%  705.53ms  
99.999%  758.78ms  
100.000%  774.14ms  

Detailed Percentile spectrum:  
Value   Percentile   TotalCount 1/(1-Percentile)  

       0.138     0.000000            1         1.00
       1.519     0.100000       143003         1.11
       2.263     0.200000       286097         1.25
       3.259     0.300000       429106         1.43
       5.055     0.400000       571913         1.67
       8.695     0.500000       714932         2.00
      11.295     0.550000       786347         2.22
      14.831     0.600000       857795         2.50
      19.983     0.650000       929353         2.86
      27.327     0.700000      1000806         3.33
      38.591     0.750000      1072320         4.00
      46.463     0.775000      1107972         4.44
      55.839     0.800000      1143760         5.00
      66.815     0.825000      1179547         5.71
      81.151     0.850000      1215219         6.67
      99.391     0.875000      1250956         8.00
     109.759     0.887500      1268832         8.89
     121.599     0.900000      1286660        10.00
     135.679     0.912500      1304588        11.43
     151.295     0.925000      1322395        13.33
     171.519     0.937500      1340333        16.00
     184.703     0.943750      1349243        17.78
     200.703     0.950000      1358183        20.00
     217.343     0.956250      1367094        22.86
     235.775     0.962500      1376036        26.67
     260.479     0.968750      1384965        32.00
     274.431     0.971875      1389484        35.56
     288.767     0.975000      1393889        40.00
     304.127     0.978125      1398355        45.71
     320.511     0.981250      1402826        53.33
     338.431     0.984375      1407316        64.00
     348.159     0.985938      1409556        71.11
     359.935     0.987500      1411772        80.00
     372.735     0.989062      1413995        91.43
     390.911     0.990625      1416212       106.67
     415.999     0.992188      1418452       128.00
     430.335     0.992969      1419563       142.22
     448.767     0.993750      1420691       160.00
     472.319     0.994531      1421798       182.86
     496.383     0.995313      1422917       213.33
     529.919     0.996094      1424053       256.00
     545.791     0.996484      1424601       284.44
     560.639     0.996875      1425164       320.00
     573.439     0.997266      1425715       365.71
     586.239     0.997656      1426268       426.67
     596.991     0.998047      1426845       512.00
     603.647     0.998242      1427107       568.89
     609.791     0.998437      1427407       640.00
     615.423     0.998633      1427671       731.43
     623.103     0.998828      1427955       853.33
     631.295     0.999023      1428217      1024.00
     635.391     0.999121      1428357      1137.78
     640.511     0.999219      1428503      1280.00
     646.143     0.999316      1428645      1462.86
     653.311     0.999414      1428788      1706.67
     659.455     0.999512      1428925      2048.00
     662.527     0.999561      1428985      2275.56
     666.623     0.999609      1429060      2560.00
     671.743     0.999658      1429130      2925.71
     676.863     0.999707      1429198      3413.33
     681.983     0.999756      1429268      4096.00
     685.055     0.999780      1429300      4551.11
     689.151     0.999805      1429336      5120.00
     692.223     0.999829      1429372      5851.43
     696.319     0.999854      1429408      6826.67
     701.439     0.999878      1429441      8192.00
     703.487     0.999890      1429457      9102.22
     706.047     0.999902      1429475     10240.00
     708.607     0.999915      1429492     11702.86
     713.215     0.999927      1429510     13653.33
     719.871     0.999939      1429526     16384.00
     724.991     0.999945      1429536     18204.44
     729.087     0.999951      1429544     20480.00
     732.159     0.999957      1429552     23405.71
     737.791     0.999963      1429561     27306.67
     741.887     0.999969      1429570     32768.00
     743.423     0.999973      1429574     36408.89
     745.983     0.999976      1429579     40960.00
     749.567     0.999979      1429583     46811.43
     752.639     0.999982      1429587     54613.33
     756.223     0.999985      1429593     65536.00
     756.735     0.999986      1429595     72817.78
     757.759     0.999988      1429596     81920.00
     758.783     0.999989      1429600     93622.86
     758.783     0.999991      1429600    109226.67
     759.807     0.999992      1429603    131072.00
     760.319     0.999993      1429604    145635.56
     760.831     0.999994      1429605    163840.00
     761.855     0.999995      1429606    187245.71
     762.367     0.999995      1429608    218453.33
     762.367     0.999996      1429608    262144.00
     763.903     0.999997      1429609    291271.11
     763.903     0.999997      1429609    327680.00
     765.439     0.999997      1429610    374491.43
     765.439     0.999998      1429610    436906.67
     766.975     0.999998      1429611    524288.00
     766.975     0.999998      1429611    582542.22
     766.975     0.999998      1429611    655360.00
     768.511     0.999999      1429612    748982.86
     768.511     0.999999      1429612    873813.33
     768.511     0.999999      1429612   1048576.00
     768.511     0.999999      1429612   1165084.44
     768.511     0.999999      1429612   1310720.00
     774.143     0.999999      1429613   1497965.71
     774.143     1.000000      1429613          inf
[Mean    =       40.832, StdDeviation   =       78.856]  
[Max     =      773.632, Total count    =      1429613]  
[Buckets =           27, SubBuckets     =         2048]  
----------------------------------------------------------
1558660 requests in 2.00m, 99.59MB read  
Requests/sec:  12988.59  
Transfer/sec:    849.84KB   

----


./profiler.sh -d 90 -e lock -f hw4lock_get.html 712  
./profiler.sh -d 90 -e alloc -f hw4alloc_get.html 712    
./profiler.sh -d 90 -f hw4cpu_get.html 712  

# GET

По наполненной базе

root@DESKTOP-E01FUOQ:~/wrk2# wrk -c 120 -t 3 -d 2m -R 9000 -L -s get.lua http://localhost:8080  
Running 2m test @ http://localhost:8080  
3 threads and 120 connections  
Thread calibration: mean lat.: 254.685ms, rate sampling interval: 897ms  
Thread calibration: mean lat.: 164.740ms, rate sampling interval: 620ms  
Thread calibration: mean lat.: 266.468ms, rate sampling interval: 941ms  
Thread Stats   Avg      Stdev     Max   +/- Stdev  
Latency   137.83ms  207.48ms   1.06s    84.32%  
Req/Sec     3.01k   330.36     4.26k    73.37%  
Latency Distribution (HdrHistogram - Recorded Latency)  
50.000%   30.82ms  
75.000%  165.50ms  
90.000%  489.73ms  
99.000%  812.54ms  
99.900%  999.93ms  
99.990%    1.03s  
99.999%    1.05s  
100.000%    1.06s  

Detailed Percentile spectrum:  
Value   Percentile   TotalCount 1/(1-Percentile)  

       0.236     0.000000            1         1.00
       3.995     0.100000        98866         1.11
       7.051     0.200000       197776         1.25
      10.935     0.300000       296641         1.43
      17.103     0.400000       395515         1.67
      30.815     0.500000       494230         2.00
      45.215     0.550000       543737         2.22
      66.111     0.600000       593106         2.50
      91.647     0.650000       642533         2.86
     121.983     0.700000       691927         3.33
     165.503     0.750000       741359         4.00
     195.071     0.775000       766131         4.44
     238.207     0.800000       790805         5.00
     296.447     0.825000       815483         5.71
     363.263     0.850000       840209         6.67
     432.895     0.875000       864892         8.00
     462.591     0.887500       877320         8.89
     489.727     0.900000       889614        10.00
     518.143     0.912500       901965        11.43
     550.399     0.925000       914447        13.33
     587.263     0.937500       926704        16.00
     608.255     0.943750       932906        17.78
     630.783     0.950000       939024        20.00
     656.383     0.956250       945282        22.86
     680.959     0.962500       951459        26.67
     705.535     0.968750       957615        32.00
     717.311     0.971875       960644        35.56
     729.599     0.975000       963760        40.00
     742.911     0.978125       966882        45.71
     757.247     0.981250       969972        53.33
     774.143     0.984375       973092        64.00
     782.847     0.985938       974558        71.11
     792.575     0.987500       976091        80.00
     804.351     0.989062       977645        91.43
     818.687     0.990625       979185       106.67
     838.655     0.992188       980731       128.00
     852.479     0.992969       981495       142.22
     866.815     0.993750       982274       160.00
     883.711     0.994531       983068       182.86
     904.191     0.995313       983817       213.33
     926.719     0.996094       984583       256.00
     937.983     0.996484       984974       284.44
     950.271     0.996875       985358       320.00
     961.023     0.997266       985744       365.71
     970.751     0.997656       986136       426.67
     979.967     0.998047       986514       512.00
     984.575     0.998242       986709       568.89
     989.183     0.998437       986918       640.00
     993.279     0.998633       987107       731.43
     996.351     0.998828       987284       853.33
    1000.447     0.999023       987509      1024.00
    1001.983     0.999121       987596      1137.78
    1003.519     0.999219       987698      1280.00
    1005.055     0.999316       987778      1462.86
    1007.103     0.999414       987872      1706.67
    1009.663     0.999512       987980      2048.00
    1010.687     0.999561       988017      2275.56
    1011.711     0.999609       988062      2560.00
    1013.247     0.999658       988116      2925.71
    1015.295     0.999707       988164      3413.33
    1016.831     0.999756       988209      4096.00
    1017.855     0.999780       988230      4551.11
    1018.879     0.999805       988250      5120.00
    1020.415     0.999829       988278      5851.43
    1021.951     0.999854       988307      6826.67
    1023.487     0.999878       988326      8192.00
    1024.511     0.999890       988337      9102.22
    1025.535     0.999902       988346     10240.00
    1026.559     0.999915       988359     11702.86
    1028.095     0.999927       988372     13653.33
    1029.631     0.999939       988387     16384.00
    1030.143     0.999945       988388     18204.44
    1032.191     0.999951       988396     20480.00
    1033.215     0.999957       988401     23405.71
    1034.239     0.999963       988406     27306.67
    1036.799     0.999969       988412     32768.00
    1037.823     0.999973       988416     36408.89
    1039.359     0.999976       988418     40960.00
    1040.383     0.999979       988422     46811.43
    1040.895     0.999982       988424     54613.33
    1042.943     0.999985       988427     65536.00
    1043.455     0.999986       988429     72817.78
    1044.479     0.999988       988431     81920.00
    1045.503     0.999989       988432     93622.86
    1046.015     0.999991       988434    109226.67
    1047.039     0.999992       988435    131072.00
    1048.575     0.999993       988436    145635.56
    1048.575     0.999994       988436    163840.00
    1049.599     0.999995       988437    187245.71
    1050.623     0.999995       988438    218453.33
    1052.671     0.999996       988440    262144.00
    1052.671     0.999997       988440    291271.11
    1052.671     0.999997       988440    327680.00
    1052.671     0.999997       988440    374491.43
    1052.671     0.999998       988440    436906.67
    1055.743     0.999998       988441    524288.00
    1055.743     0.999998       988441    582542.22
    1055.743     0.999998       988441    655360.00
    1055.743     0.999999       988441    748982.86
    1055.743     0.999999       988441    873813.33
    1056.767     0.999999       988442   1048576.00
    1056.767     1.000000       988442          inf
[Mean    =      137.828, StdDeviation   =      207.483]
[Max     =     1055.744, Total count    =       988442]
[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
1079148 requests in 2.00m, 75.81MB read  
Requests/sec:   8992.71  
Transfer/sec:    646.91KB  


# ВЫВОДЫ:

Плохо реализовано, максимальный возможный rate упал у put'a с 25 до 13, у get с 20 до 8, так же и отвечать стало гораздо медленнее,
в put'e висим на локах. Мы в цикле очень быстро собираем ноды для запросов, дальше к каждой делаем запрос, пока не АСК, 
а дальше оптравляем на другие ноды в другом потоке, поэтому ждем только ask. Возможно стоит как-ток каждой отсылать запрос
через future, а дальше ждать ответы. Попробую найти проблему, из-за чего так просело, по идее оно и должно было упасть(  
то сколько выдерживает запросов), т.к теперь храним не в одном месте, но так ли сильно.

Locks: 
PUT: Видно, что все место занимает lock в sendResponse. У гета же не так, единственное что приходит в голову - это то, что
put сам по себе быстрее выполняется. Из-за чего очень частые локи

Cpu's:
PUT: Если просуммировать, то oneNio занимает в общей сложности 29%, 
GET: Аналогично, как в put, много занимает oneNio.

Allocs:
Очень много выделений массивов байт в response reader'e при вызове invoke. Но это никак не убрать.
Так же есть много выделений bytebuffer'ов, когда делаем asReadOnly, часть можно убрать, не храня timestamp в bytebuffer,
с самого начало не мог определиться, как все таки сделать, сделал с butebufferom, возможно ошибка.


## Put:
[cpu_put](hw5cpu_put.html)
[alloc_put](hw5alloc_put.html)
[lock_put](hw5lock_put.html)


## Get:
[cpu_get](hw5cpu_get.html)
[alloc_get](hw5alloc_get.html)
[lock_get](hw5lock_get.html)

______


#После попытки что-то изменить

# GET

root@DESKTOP-E01FUOQ:~/wrk2# wrk -c 120 -t 3 -d 2m -R 15000 -L -s put.lua http://localhost:8080  
Running 2m test @ http://localhost:8080  
3 threads and 120 connections  
Thread calibration: mean lat.: 28.699ms, rate sampling interval: 156ms  
Thread calibration: mean lat.: 10.803ms, rate sampling interval: 47ms  
Thread calibration: mean lat.: 9.760ms, rate sampling interval: 49ms  
Thread Stats   Avg      Stdev     Max   +/- Stdev  
Latency    14.84ms   58.58ms   1.01s    96.52%  
Req/Sec     5.08k     0.99k   16.50k    85.24%  
Latency Distribution (HdrHistogram - Recorded Latency)  
50.000%    3.84ms  
75.000%    7.41ms  
90.000%   17.45ms  
99.000%  274.43ms  
99.900%  841.22ms  
99.990%  990.21ms  
99.999%    1.00s  
100.000%    1.01s  

Detailed Percentile spectrum: 
Value   Percentile   TotalCount 1/(1-Percentile)  

       0.134     0.000000            1         1.00
       1.448     0.100000       164836         1.11
       2.032     0.200000       329579         1.25
       2.553     0.300000       494474         1.43
       3.131     0.400000       659017         1.67
       3.839     0.500000       823548         2.00
       4.291     0.550000       905974         2.22
       4.839     0.600000       988127         2.50
       5.547     0.650000      1070772         2.86
       6.415     0.700000      1153113         3.33
       7.407     0.750000      1235174         4.00
       8.059     0.775000      1276400         4.44
       9.095     0.800000      1317549         5.00
      10.719     0.825000      1358775         5.71
      12.351     0.850000      1399844         6.67
      14.311     0.875000      1441072         8.00
      15.567     0.887500      1461630         8.89
      17.455     0.900000      1482173        10.00
      20.271     0.912500      1502856        11.43
      23.183     0.925000      1523381        13.33
      28.351     0.937500      1543923        16.00
      31.711     0.943750      1554199        17.78
      37.823     0.950000      1564487        20.00
      47.135     0.956250      1574777        22.86
      63.199     0.962500      1585065        26.67
      88.191     0.968750      1595367        32.00
     101.823     0.971875      1600506        35.56
     117.631     0.975000      1605642        40.00
     137.855     0.978125      1610799        45.71
     165.631     0.981250      1615938        53.33
     206.207     0.984375      1621094        64.00
     229.119     0.985938      1623667        71.11
     248.959     0.987500      1626237        80.00
     265.215     0.989062      1628807        91.43
     280.831     0.990625      1631376       106.67
     305.151     0.992188      1633955       128.00
     324.863     0.992969      1635234       142.22
     357.119     0.993750      1636524       160.00
     395.007     0.994531      1637807       182.86
     446.207     0.995313      1639096       213.33
     502.783     0.996094      1640387       256.00
     520.191     0.996484      1641026       284.44
     567.807     0.996875      1641671       320.00
     620.543     0.997266      1642312       365.71
     662.015     0.997656      1642954       426.67
     709.119     0.998047      1643601       512.00
     734.719     0.998242      1643921       568.89
     761.343     0.998437      1644240       640.00
     783.871     0.998633      1644568       731.43
     809.983     0.998828      1644885       853.33
     843.775     0.999023      1645213      1024.00
     858.623     0.999121      1645371      1137.78
     877.055     0.999219      1645530      1280.00
     892.415     0.999316      1645688      1462.86
     910.335     0.999414      1645848      1706.67
     924.159     0.999512      1646008      2048.00
     932.863     0.999561      1646091      2275.56
     940.543     0.999609      1646170      2560.00
     947.711     0.999658      1646253      2925.71
     954.879     0.999707      1646330      3413.33
     965.119     0.999756      1646418      4096.00
     968.703     0.999780      1646456      4551.11
     972.287     0.999805      1646494      5120.00
     976.383     0.999829      1646533      5851.43
     982.527     0.999854      1646572      6826.67
     987.135     0.999878      1646611      8192.00
     989.183     0.999890      1646633      9102.22
     990.719     0.999902      1646653     10240.00
     992.767     0.999915      1646672     11702.86
     994.815     0.999927      1646696     13653.33
     996.863     0.999939      1646721     16384.00
     997.375     0.999945      1646725     18204.44
     997.887     0.999951      1646738     20480.00
     998.399     0.999957      1646742     23405.71
     999.423     0.999963      1646753     27306.67
    1000.447     0.999969      1646766     32768.00
    1000.959     0.999973      1646773     36408.89
    1000.959     0.999976      1646773     40960.00
    1001.471     0.999979      1646778     46811.43
    1002.495     0.999982      1646783     54613.33
    1003.007     0.999985      1646788     65536.00
    1003.519     0.999986      1646795     72817.78
    1003.519     0.999988      1646795     81920.00
    1003.519     0.999989      1646795     93622.86
    1004.031     0.999991      1646797    109226.67
    1005.055     0.999992      1646800    131072.00
    1005.567     0.999993      1646804    145635.56
    1005.567     0.999994      1646804    163840.00
    1005.567     0.999995      1646804    187245.71
    1006.079     0.999995      1646807    218453.33
    1006.079     0.999996      1646807    262144.00
    1006.079     0.999997      1646807    291271.11
    1006.079     0.999997      1646807    327680.00
    1006.591     0.999997      1646810    374491.43
    1006.591     0.999998      1646810    436906.67
    1006.591     0.999998      1646810    524288.00
    1006.591     0.999998      1646810    582542.22
    1006.591     0.999998      1646810    655360.00
    1006.591     0.999999      1646810    748982.86
    1007.103     0.999999      1646811    873813.33
    1007.103     0.999999      1646811   1048576.00
    1007.103     0.999999      1646811   1165084.44
    1007.103     0.999999      1646811   1310720.00
    1007.103     0.999999      1646811   1497965.71
    1008.127     0.999999      1646812   1747626.67
    1008.127     1.000000      1646812          inf
[Mean    =       14.843, StdDeviation   =       58.577]  
[Max     =     1007.616, Total count    =      1646812]  
[Buckets =           27, SubBuckets     =         2048]  
----------------------------------------------------------
1789428 requests in 2.00m, 114.34MB read  
Requests/sec:  14911.54  
Transfer/sec:      0.95MB  



# GET


root@DESKTOP-E01FUOQ:~/wrk2# wrk -c 120 -t 3 -d 2m -R 10000 -L -s get.lua http://localhost:8080  
Running 2m test @ http://localhost:8080  
3 threads and 120 connections  
Thread calibration: mean lat.: 409.212ms, rate sampling interval: 2840ms  
Thread calibration: mean lat.: 412.303ms, rate sampling interval: 2820ms  
Thread calibration: mean lat.: 331.404ms, rate sampling interval: 2437ms  
Thread Stats   Avg      Stdev     Max   +/- Stdev  
Latency     9.15ms   50.65ms   1.02s    98.27%  
Req/Sec     3.33k    24.08     3.44k    94.21%  
Latency Distribution (HdrHistogram - Recorded Latency)  
50.000%    2.86ms  
75.000%    4.67ms  
90.000%    8.30ms  
99.000%  214.78ms  
99.900%  868.86ms  
99.990%    1.01s  
99.999%    1.01s  
100.000%    1.02s  

Detailed Percentile spectrum:  
Value   Percentile   TotalCount 1/(1-Percentile)  

       0.200     0.000000            1         1.00
       1.174     0.100000       109947         1.11
       1.582     0.200000       219616         1.25
       1.993     0.300000       329614         1.43
       2.405     0.400000       439353         1.67
       2.861     0.500000       549327         2.00
       3.127     0.550000       604243         2.22
       3.427     0.600000       658971         2.50
       3.767     0.650000       713941         2.86
       4.171     0.700000       768722         3.33
       4.671     0.750000       823735         4.00
       4.975     0.775000       850971         4.44
       5.339     0.800000       878465         5.00
       5.791     0.825000       905828         5.71
       6.387     0.850000       933299         6.67
       7.191     0.875000       960745         8.00
       7.699     0.887500       974442         8.89
       8.303     0.900000       988242        10.00
       9.015     0.912500      1001976        11.43
       9.943     0.925000      1015672        13.33
      11.135     0.937500      1029341        16.00
      11.919     0.943750      1036191        17.78
      13.063     0.950000      1043055        20.00
      14.719     0.956250      1049912        22.86
      16.943     0.962500      1056782        26.67
      20.847     0.968750      1063637        32.00
      23.679     0.971875      1067067        35.56
      27.759     0.975000      1070498        40.00
      33.567     0.978125      1073946        45.71
      47.007     0.981250      1077358        53.33
      70.975     0.984375      1080801        64.00
      83.007     0.985938      1082509        71.11
     133.375     0.987500      1084225        80.00
     189.951     0.989062      1085939        91.43
     226.687     0.990625      1087652       106.67
     241.919     0.992188      1089371       128.00
     259.071     0.992969      1090228       142.22
     278.783     0.993750      1091088       160.00
     301.311     0.994531      1091954       182.86
     322.303     0.995313      1092800       213.33
     360.191     0.996094      1093656       256.00
     424.447     0.996484      1094087       284.44
     488.447     0.996875      1094515       320.00
     551.423     0.997266      1094944       365.71
     624.127     0.997656      1095371       426.67
     694.783     0.998047      1095800       512.00
     733.183     0.998242      1096015       568.89
     770.559     0.998437      1096234       640.00
     804.863     0.998633      1096446       731.43
     838.655     0.998828      1096660       853.33
     872.447     0.999023      1096872      1024.00
     889.343     0.999121      1096982      1137.78
     907.263     0.999219      1097091      1280.00
     924.159     0.999316      1097195      1462.86
     940.543     0.999414      1097303      1706.67
     958.463     0.999512      1097412      2048.00
     967.167     0.999561      1097464      2275.56
     975.359     0.999609      1097516      2560.00
     984.063     0.999658      1097570      2925.71
     991.743     0.999707      1097623      3413.33
     995.839     0.999756      1097676      4096.00
     998.399     0.999780      1097706      4551.11
     999.935     0.999805      1097731      5120.00
    1001.471     0.999829      1097764      5851.43
    1003.007     0.999854      1097789      6826.67
    1004.543     0.999878      1097810      8192.00
    1005.567     0.999890      1097825      9102.22
    1006.591     0.999902      1097844     10240.00
    1007.103     0.999915      1097852     11702.86
    1008.127     0.999927      1097869     13653.33
    1008.639     0.999939      1097879     16384.00
    1009.663     0.999945      1097887     18204.44
    1010.687     0.999951      1097895     20480.00
    1011.199     0.999957      1097904     23405.71
    1011.199     0.999963      1097904     27306.67
    1012.223     0.999969      1097912     32768.00
    1012.735     0.999973      1097919     36408.89
    1012.735     0.999976      1097919     40960.00
    1013.247     0.999979      1097929     46811.43
    1013.247     0.999982      1097929     54613.33
    1013.247     0.999985      1097929     65536.00
    1013.247     0.999986      1097929     72817.78
    1013.759     0.999988      1097932     81920.00
    1014.271     0.999989      1097933     93622.86
    1014.783     0.999991      1097937    109226.67
    1014.783     0.999992      1097937    131072.00
    1014.783     0.999993      1097937    145635.56
    1015.295     0.999994      1097939    163840.00
    1015.295     0.999995      1097939    187245.71
    1015.295     0.999995      1097939    218453.33
    1016.319     0.999996      1097940    262144.00
    1017.855     0.999997      1097942    291271.11
    1017.855     0.999997      1097942    327680.00
    1017.855     0.999997      1097942    374491.43
    1017.855     0.999998      1097942    436906.67
    1017.855     0.999998      1097942    524288.00
    1018.879     0.999998      1097944    582542.22
    1018.879     1.000000      1097944          inf
[Mean    =        9.154, StdDeviation   =       50.652]  
[Max     =     1018.368, Total count    =      1097944]  
[Buckets =           27, SubBuckets     =         2048]  
----------------------------------------------------------
1196009 requests in 2.00m, 84.06MB read  
Requests/sec:   9966.79  
Transfer/sec:    717.30KB  

После изменений получилось сделать для 99% меньше 300msec, но все так же как-то не очень.
Повысилась макс latency, но все так-же 100% 1 сек и там, и там. Исправил, что-бы получать респонсы не
синхронно, но при этом блочимся на гете, когда получаем. Кажется, что как-то можно исправить ситуацию с CompletableFuture,
но как что-то в голову не приходит. Так же блоки на sendRespose и очень большая аллокация байтов в нем же.
Так же по flamegraph видно, что много системных вызовов.


## Put:
[cpu_put](second/hw566cpu_put.html)
[alloc_put](second/hw566alloc_put.html)
[lock_put](second/hw566lock_put.html)


## Get:
[cpu_get](second/hw566cpu_get.html)
[alloc_get](second/hw566alloc_get.html)
[lock_get](second/hw566lock_get.html)